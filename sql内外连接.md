### SQL多表查询

#### 1.1 SQL查询的基本原理

​	第一、 单表查询： 根据WHERE条件过滤表中的记录，形成中间表；然后根据SELECT的选择列选择相应结果。

​	第二、 两表连接查询：对两表求积（笛卡尔积）并用ON条件和连接类型进行过滤形成中间表；然后根据WHERE条件过滤中间表的记录，并根据SELECT指定的列返回查询结果。

​	 第三、多表连接查询：先对第一个和第二个表按照两表连接做查询，然后用查询结果和第三个表做连接查询，以此类推，直到所有的表都连接上为止，最终形成一个中间的结果表，然后根据WHERE条件过滤中间表的记录，并根据SELECT指定的列返回查询结果。 

#### 1.2 ON后面的条件（ON条件）和WHERE条件的区别

​	ON条件：

​	是过滤<font color="red">两个连接表笛卡尔积形成中间表的约束条件。</font>

​	WHERE条件：

​	在有ON条件的SELECT语句中是过滤中间表的约束条件。

​	在单、多表查询中，是限制物理表或者中间查询结果返回结果的约束

​	<font color="red">从而看出，将WHERE条件移入ON后面是不恰当的。推荐的做法是：ON只进行连接操作，WHERE只过滤中间表的记录</font>

#### 1.3 内连接 INNER JOIN

   语句1：隐式的内连接，没有INNER JOIN，形成的中间表为两个表的笛卡尔积。

```sql
SELECT o.id,o.number,c.id,c.name
FROM customers c,orders o
WHERE c.id=o.customers.id;
```
  语句2： 显示的内连接，一般称为内连接，有INNER JOIN，形成的中间表为两个表经过ON条件过滤后的笛卡尔积。

```sql
SELECT o.id,o.number,c.id,c.name
FORM customers c INNER JOIN orders o
ON c.id=o.id;	
```

#### 1.4 外连接 OUTER JOIN

​	1)   左向外联接的结果集包括 LEFT OUTER子句中指定的左表的所有行，而不仅仅是联接列所匹配的行。<font color="red">如果左表的某行在右表中没有匹配行，则在相关联的结果集行中右表的所有选择列表列均为空值。</font>  

​	2)    右连接同上

​	3） 完整外部联接返回左表和右表中的所有行。**当某行在另一个表中没有匹配行时，则另一个表的选择列表列包含空值**。如果表之间有匹配行，则整个结果集行包含基表的数据值。 





​    